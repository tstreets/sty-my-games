{"version":3,"file":"component---src-pages-login-index-js-03e24ebb1880fa73a682.js","mappings":"gMAoDA,UA9Cc,SAAC,GAA6B,IAAfA,EAAc,EAA1BC,SAAYD,MACzB,EAAwBE,EAAAA,SAAe,MAAhCC,EAAP,KAAaC,EAAb,KACA,EAAsCF,EAAAA,UAAe,GAA9CG,EAAP,KAAoBC,EAApB,KACA,EAA0BJ,EAAAA,SAAe,IAAlCK,EAAP,KAAcC,EAAd,KAHuC,wCAKvC,4FACQH,EADR,wDAEIC,GAAe,GAFnB,mBAI6CG,EAAAA,EAAAA,MAJ7C,mBAIgBC,EAJhB,EAIgBA,MAAOC,EAJvB,EAIuBA,YACVD,EALb,wBAMYF,EAAS,gCANrB,2BASYD,GAAOC,EAAS,IACpBJ,EAAQ,CACJM,MAAAA,EACAC,YAAAA,IAZZ,kDAeQH,EAAS,gBAfjB,QAiBIF,GAAe,GAjBnB,2DALuC,sBAyBvC,OACI,gBAAC,WAAD,KACKC,EAAQ,qBAAGK,MAAO,CAAEC,MAAO,QAAUN,GAAa,KACjDJ,EAGE,gBAAC,WAAD,KACI,gBAAC,EAAAW,KAAD,CACIC,GACIf,GAASA,EAAMgB,SAAf,IAA8BhB,EAAMgB,SAAa,IAErDhB,MAAK,iBAAQA,GAAS,GAAjB,CAAsBG,KAAAA,KAE3B,gBAAC,IAAD,sBATR,gBAAC,IAAD,CAAQc,QA7BmB,4CA6B3B","sources":["webpack://sty-my-games/./src/pages/login/index.js"],"sourcesContent":["import { Link } from 'gatsby';\r\nimport React from 'react';\r\nimport { Button } from 'semantic-ui-react';\r\n\r\nimport { loginUser } from '../../functions/db';\r\n\r\nconst Login = ({ location: { state } }) => {\r\n    const [user, setUser] = React.useState(null);\r\n    const [userLoading, setUserLoading] = React.useState(false);\r\n    const [error, setError] = React.useState('');\r\n\r\n    async function attemptLogin() {\r\n        if (userLoading) return;\r\n        setUserLoading(true);\r\n        try {\r\n            const { email, displayName } = await loginUser();\r\n            if (!email) {\r\n                setError(`Login Failed: No email found`);\r\n                return;\r\n            }\r\n            if (error) setError('');\r\n            setUser({\r\n                email,\r\n                displayName,\r\n            });\r\n        } catch {\r\n            setError('Login Failed');\r\n        }\r\n        setUserLoading(false);\r\n    }\r\n\r\n    return (\r\n        <React.Fragment>\r\n            {error ? <p style={{ color: 'red' }}>{error}</p> : null}\r\n            {!user ? (\r\n                <Button onClick={attemptLogin}>Login</Button>\r\n            ) : (\r\n                <React.Fragment>\r\n                    <Link\r\n                        to={\r\n                            state && state.lastPage ? `/${state.lastPage}` : '/'\r\n                        }\r\n                        state={{ ...(state || {}), user }}\r\n                    >\r\n                        <Button>Go Explore!</Button>\r\n                    </Link>\r\n                </React.Fragment>\r\n            )}\r\n        </React.Fragment>\r\n    );\r\n};\r\n\r\nexport default Login;\r\n"],"names":["state","location","React","user","setUser","userLoading","setUserLoading","error","setError","loginUser","email","displayName","style","color","Link","to","lastPage","onClick"],"sourceRoot":""}