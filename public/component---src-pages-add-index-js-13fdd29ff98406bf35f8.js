"use strict";(self.webpackChunksty_my_games=self.webpackChunksty_my_games||[]).push([[546],{5358:function(e,n,t){t.r(n),t.d(n,{default:function(){return S}});var a=t(2982),r=t(5861),l=t(7757),c=t.n(l),i=t(7294),o=t(7064),m=t(7626),u=t(634),s=t(5102),p=t(4852),d=t(818),f=function(e){var n=e.id,t=e.description_preview,a=e.image_url,r=e.max_players,l=e.min_players,c=e.max_playtime,o=e.min_playtime,m=e.mechanics,s=e.min_age,p=e.name,f=e.publisher,g=e.year_published,h=e.mechanicsRef,y=e.toggleSelectGame,E=e.selectedGame,v=h.filter((function(e){return m.find((function(n){return n.id===e.id}))}));var b=v.map((function(e,n){return i.createElement(i.Fragment,{key:"mech-"+n},e.name,", ")})),F=E.id===n?"red":null,Z=E.id===n?"Unselect":"Select";return i.createElement(i.Fragment,null,i.createElement(d.Z,{as:"h3"},p),i.createElement("p",null,t||"No description"),i.createElement("p",null,"Players: ",l," - ",r),i.createElement("p",null,"Playtime: ",o," - ",c),i.createElement("p",null,"Ages ",s,"+"),i.createElement("p",null,"Company: ",f),i.createElement("p",null,"Mechanics: ",b),i.createElement(u.Z,{size:"tiny",content:Z,onClick:function(){y(n,{id:n,description:t,maxPlayers:r,minPlayers:l,maxPlaytime:c,minPlaytime:o,backupImage:a,minAge:s,year:g},v)},color:F}))},g=t(281),h=t(1242);t(2434);var y=function(e){var n=e.children,t=e.content;return i.createElement(i.Fragment,null,n||t)},E=function(e){var n=e.header,t=e.content,a=e.children,r=!(null==a||!a.length),l=r?a.filter((function(e){var n;return"string"!=typeof e&&!(null!=e&&null!==(n=e.props)&&void 0!==n&&n.isWizardFormHeader)})):null,c=r?a.find((function(e){var n;return"string"!=typeof e&&(null==e||null===(n=e.props)||void 0===n?void 0:n.isWizardFormPage)})):null;return i.createElement(i.Fragment,null,i.createElement("fieldset",null,i.createElement("legend",null,n||c),r?l:a||t))},v=function(e){var n=e.pageNumber,t=e.setPageNumber,a=e.totalPages,r=e.onDone;return i.createElement(i.Fragment,null,i.createElement(o.Z.Group,{className:"btns",widths:"equal"},i.createElement(o.Z.Field,null,n>0?i.createElement(u.Z,{fluid:!0,onClick:function(){t(n-1)}},i.createElement(g.Z,{name:"arrow left"}),"Back"):null),i.createElement(o.Z.Field,null,n<a?i.createElement(u.Z,{color:"green",fluid:!0,onClick:function(){t(n+1)}},"Next",i.createElement(g.Z,{name:"arrow right"})):i.createElement(u.Z,{color:"green",fluid:!0,onClick:function(){r(),t(0)}},"Done",i.createElement(g.Z,{name:"check",style:{paddingLeft:"8px"}})))))},b=function(e){var n,t,a,r=e.fluid,l=e.className,c=e.style,m=e.children,u=e.pages,s=void 0===u?[]:u,p=e.header,f=e.onDone,b=i.useState(0),F=b[0],Z=b[1],k=!(null==m||!m.length),x="wizard";l&&(x+=" "+l),r&&(x+=" fluid");var w=k?m.find((function(e){var n;return"string"!=typeof e&&(null===(n=e.props)||void 0===n?void 0:n.isWizardFormButtons)})):m&&"string"!=typeof m&&null!=m&&null!==(n=m.props)&&void 0!==n&&n.isWizardFormButtons?m:null,P=k?m.filter((function(e){var n;return"string"!=typeof e&&(null===(n=e.props)||void 0===n?void 0:n.isWizardFormPage)})):m&&"string"!=typeof m&&null!=m&&null!==(t=m.props)&&void 0!==t&&t.isWizardFormButtons?[m]:null,z=k?m.find((function(e){var n;return"string"!=typeof e&&(console.log(e),null===(n=e.props)||void 0===n?void 0:n.isWizardFormHeader)})):m&&"string"!=typeof m&&null!=m&&null!==(a=m.props)&&void 0!==a&&a.isWizardFormHeader?m:null;return i.createElement(i.Fragment,null,i.createElement(o.Z,{className:x,style:c},i.createElement(d.Z,{as:"h1"},z||p||"Wizard Form"),i.createElement(h.Z,{columns:"1"},i.createElement(h.Z.Column,{textAlign:"center"},(P||s).map((function(e,n){return i.createElement(i.Fragment,{key:"page-circle-"+n},i.createElement(g.Z,{name:"circle"+(n!==F?" outline":"")}))})))),(P||s).map((function(e,n){var t=n===F,a=e.type;return i.createElement(i.Fragment,{key:"wizard-form-page-"+n},i.createElement("div",{style:{display:t?"block":"none"}},a?e:i.createElement(E,null,i.createElement(y,null,e.header),e.content)))})),i.createElement(v,{buttons:w,pageNumber:F,setPageNumber:Z,totalPages:(P||s).length-1,onDone:f})))};b.Buttons=v,b.Page=E,b.Header=y;var F=b,Z="JLBr5npPhV",k="https://api.boardgameatlas.com/api/game/mechanics?client_id="+Z;function x(){return w.apply(this,arguments)}function w(){return(w=(0,r.Z)(c().mark((function e(){var n,t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(k);case 3:return n=e.sent,e.next=6,n.json();case 6:return t=e.sent,e.abrupt("return",t.mechanics||[]);case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",[]);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function P(e){return z.apply(this,arguments)}function z(){return(z=(0,r.Z)(c().mark((function e(n){var t,a,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="https://api.boardgameatlas.com/api/search?name="+n+"&client_id="+Z,e.prev=1,e.next=4,fetch(t);case 4:return a=e.sent,e.next=7,a.json();case 7:return r=e.sent,e.abrupt("return",r.games||[]);case 11:return e.prev=11,e.t0=e.catch(1),e.abrupt("return",[]);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})))).apply(this,arguments)}var C=t(9515),S=function(e){var n=e.location.state,t={name:"",company:"",mechanics:[],minPlayers:0,maxPlayers:10,minPlaytime:5,maxPlaytime:15,minAge:3,description:"",id:0,backupImage:"",year:""},l=i.useState(t),d=l[0],g=l[1],h=i.useState((null==n?void 0:n.mechanics)||null),y=h[0],E=h[1],v=i.useState(!1),b=v[0],Z=v[1],k=i.useState([]),w=k[0],z=k[1],S=i.useState([]),W=S[0],_=S[1],H=i.useState(!1),N=H[0],B=H[1],D=i.useState(!0),j=D[0],G=D[1];function O(){return(O=(0,r.Z)(c().mark((function e(){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Z(!0),e.next=3,x();case 3:A(n=e.sent),E(n),Z(!1);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e){"undefined"!=typeof window&&(localStorage.state=JSON.stringify(Object.assign({},n||{},{mechanics:e})))}function I(){return(I=(0,r.Z)(c().mark((function e(){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d.name){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,P(d.name);case 4:n=e.sent,z(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(e,n){var t,a=n.name,r=n.value;g(Object.assign({},d,((t={})[a]=r,t))),w.length&&z([])}function T(e,n,a){d.id===e?g(Object.assign({},t,{name:d.name,company:d.company})):g(Object.assign({},d,n,{mechanics:a.map((function(e){return e.name}))})),_([])}function q(){return(q=(0,r.Z)(c().mark((function e(){var a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d.id&&!N){e.next=2;break}return e.abrupt("return");case 2:return B(!0),e.prev=3,delete(a=Object.assign({},d)).id,e.next=8,(0,C.s2)({gameData:a,user:n.user});case 8:e.sent&&(g(t),z([])),e.next=14;break;case 12:e.prev=12,e.t0=e.catch(3);case 14:B(!1);case 15:case"end":return e.stop()}}),e,null,[[3,12]])})))).apply(this,arguments)}i.useState((function(){y||b||function(){O.apply(this,arguments)}()}));var J=y?[].concat((0,a.Z)(W),(0,a.Z)(y)).map((function(e){return{text:e.name,value:e.name}})):[];return i.createElement(i.Fragment,null,i.createElement(F,{fluid:!0,onDone:function(){return q.apply(this,arguments)}},i.createElement(F.Header,{isWizardFormHeader:!0},"Add New Game"),i.createElement(F.Page,{isWizardFormPage:!0},i.createElement(F.Header,{isWizardFormHeader:!0},"Base Info"),i.createElement(o.Z.Field,null,i.createElement("label",{htmlFor:"name"},"Name"),i.createElement(m.Z,{id:"name",name:"name",value:d.name,onChange:M})),i.createElement(o.Z.Field,null,i.createElement("label",{htmlFor:"company"},"Company"),i.createElement(m.Z,{id:"company",name:"company",value:d.company,onChange:M}))),i.createElement(F.Page,{isWizardFormPage:!0},i.createElement(F.Header,{isWizardFormHeader:!0},"Search More Details"),i.createElement(u.Z,{type:"button",icon:"search",content:"Search Game",onClick:function(){return I.apply(this,arguments)}}),w.map((function(e,n){return i.createElement(f,Object.assign({key:"game-preview-"+n},e,{mechanicsRef:y,toggleSelectGame:T,selectedGame:d}))})),w.length>3&&d.id?i.createElement(u.Z,{content:"To "+(j?"Bottom":"Top"),icon:"arrow "+(j?"down":"up"),circular:!0,color:"blue",style:{position:"fixed",bottom:"20%",left:"75%"},onClick:function(){G(!j);var e=document.querySelector(".content"),n=j?e.scrollHeight:0;e.scrollTo({top:n,behavior:"smooth"})}}):null),i.createElement(F.Page,{isWizardFormPage:!0},i.createElement(F.Header,{isWizardFormHeader:!0},"Finalize Details"),i.createElement(o.Z.Field,null,i.createElement("label",{htmlFor:"name"},"Name"),i.createElement(m.Z,{id:"name",name:"name",value:d.name,onChange:M})),i.createElement(o.Z.Field,null,i.createElement("label",{htmlFor:"company"},"Company"),i.createElement(m.Z,{id:"company",name:"company",value:d.company,onChange:M})),i.createElement(o.Z.Field,null,i.createElement("label",{htmlFor:"description"},"Description"),i.createElement(s.Z,{id:"description",name:"description",value:d.description||"",onChange:M})),i.createElement(o.Z.Field,null,i.createElement("label",{htmlFor:"mechanics"},"Game Mechanics"),i.createElement(p.Z,{id:"mechanics",name:"mechanics",value:d.mechanics,onChange:M,options:J,multiple:!0,clearable:!0,search:!0,selectOnBlur:!1,allowAdditions:!0,onAddItem:function(e,n){var t=n.value;_([].concat((0,a.Z)(W),[{name:t}]))}})))))}},2434:function(e,n,t){t.r(n)}}]);
//# sourceMappingURL=component---src-pages-add-index-js-13fdd29ff98406bf35f8.js.map