"use strict";(self.webpackChunksty_my_games=self.webpackChunksty_my_games||[]).push([[546],{5358:function(e,n,t){t.r(n),t.d(n,{default:function(){return _}});var a=t(2982),r=t(5861),l=t(7757),c=t.n(l),i=t(7294),m=t(7064),u=t(7626),o=t(634),s=t(5102),p=t(4852),d=t(818),f=function(e){var n=e.id,t=e.description_preview,a=e.image_url,r=e.max_players,l=e.min_players,c=e.max_playtime,m=e.min_playtime,u=e.mechanics,s=e.min_age,p=e.name,f=e.publisher,h=e.year_published,g=e.mechanicsRef,y=e.toggleSelectGame,E=e.selectedGame,v=g.filter((function(e){return u.find((function(n){return n.id===e.id}))}));var b=v.map((function(e,n){return i.createElement(i.Fragment,{key:"mech-"+n},e.name,", ")})),Z=E.id===n?"red":null,F=E.id===n?"Unselect":"Select";return i.createElement(i.Fragment,null,i.createElement(d.Z,{as:"h3"},p),i.createElement("p",null,t||"No description"),i.createElement("p",null,"Players: ",l," - ",r),i.createElement("p",null,"Playtime: ",m," - ",c),i.createElement("p",null,"Ages ",s,"+"),i.createElement("p",null,"Company: ",f),i.createElement("p",null,"Mechanics: ",b),i.createElement(o.Z,{size:"tiny",content:F,onClick:function(){y(n,{id:n,description:t,maxPlayers:r,minPlayers:l,maxPlaytime:c,minPlaytime:m,backupImage:a,minAge:s,year:h},v)},color:Z}))},h=t(281),g=t(1242);t(2434);var y=function(e){var n=e.children,t=e.content;return i.createElement(i.Fragment,null,n||t)},E=function(e){var n=e.header,t=e.content,a=e.children,r=!(null==a||!a.length),l=r?a.filter((function(e){var n;return"string"!=typeof e&&"WizardFormHeader"!==(null==e||null===(n=e.type)||void 0===n?void 0:n.name)})):null,c=r?a.find((function(e){var n;return"string"!=typeof e&&"WizardFormHeader"===(null==e||null===(n=e.type)||void 0===n?void 0:n.name)})):null;return i.createElement(i.Fragment,null,i.createElement("fieldset",null,i.createElement("legend",null,n||c),r?l:a||t))},v=function(e){var n=e.pageNumber,t=e.setPageNumber,a=e.totalPages,r=e.onDone;return i.createElement(i.Fragment,null,i.createElement(m.Z.Group,{className:"btns",widths:"equal"},i.createElement(m.Z.Field,null,n>0?i.createElement(o.Z,{fluid:!0,onClick:function(){t(n-1)}},i.createElement(h.Z,{name:"arrow left"}),"Back"):null),i.createElement(m.Z.Field,null,n<a?i.createElement(o.Z,{color:"green",fluid:!0,onClick:function(){t(n+1)}},"Next",i.createElement(h.Z,{name:"arrow right"})):i.createElement(o.Z,{color:"green",fluid:!0,onClick:function(){r(),t(0)}},"Done",i.createElement(h.Z,{name:"check",style:{paddingLeft:"8px"}})))))},b=function(e){var n,t,a,r=e.fluid,l=e.className,c=e.style,u=e.children,o=e.pages,s=void 0===o?[]:o,p=e.header,f=e.onDone,b=i.useState(0),Z=b[0],F=b[1],k=!(null==u||!u.length),x="wizard";l&&(x+=" "+l),r&&(x+=" fluid");var w=k?u.find((function(e){return"string"!=typeof e&&"WizardFormButtons"===e.type.name})):u&&"string"!=typeof u&&"WizardFormButtons"===(null==u||null===(n=u.type)||void 0===n?void 0:n.name)?u:null,P=k?u.filter((function(e){return"string"!=typeof e&&"WizardFormPage"===e.type.name})):u&&"string"!=typeof u&&"WizardFormPage"===(null==u||null===(t=u.type)||void 0===t?void 0:t.name)?[u]:null,C=k?u.find((function(e){return"string"!=typeof e&&"WizardFormHeader"===e.type.name})):u&&"string"!=typeof u&&"WizardFormHeader"===(null==u||null===(a=u.type)||void 0===a?void 0:a.name)?u:null;return i.createElement(i.Fragment,null,i.createElement(m.Z,{className:x,style:c},i.createElement(d.Z,{as:"h1"},C||p||"Wizard Form"),i.createElement(g.Z,{columns:"1"},i.createElement(g.Z.Column,{textAlign:"center"},(P||s).map((function(e,n){return i.createElement(i.Fragment,{key:"page-circle-"+n},i.createElement(h.Z,{name:"circle"+(n!==Z?" outline":"")}))})))),(P||s).map((function(e,n){var t=n===Z,a=e.type;return i.createElement(i.Fragment,{key:"wizard-form-page-"+n},i.createElement("div",{style:{display:t?"block":"none"}},a?e:i.createElement(E,null,i.createElement(y,null,e.header),e.content)))})),i.createElement(v,{buttons:w,pageNumber:Z,setPageNumber:F,totalPages:(P||s).length-1,onDone:f})))};b.Buttons=v,b.Page=E,b.Header=y;var Z=b,F="JLBr5npPhV",k="https://api.boardgameatlas.com/api/game/mechanics?client_id="+F;function x(){return w.apply(this,arguments)}function w(){return(w=(0,r.Z)(c().mark((function e(){var n,t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(k);case 3:return n=e.sent,e.next=6,n.json();case 6:return t=e.sent,e.abrupt("return",t.mechanics||[]);case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",[]);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function P(e){return C.apply(this,arguments)}function C(){return(C=(0,r.Z)(c().mark((function e(n){var t,a,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="https://api.boardgameatlas.com/api/search?name="+n+"&client_id="+F,e.prev=1,e.next=4,fetch(t);case 4:return a=e.sent,e.next=7,a.json();case 7:return r=e.sent,e.abrupt("return",r.games||[]);case 11:return e.prev=11,e.t0=e.catch(1),e.abrupt("return",[]);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})))).apply(this,arguments)}var S=t(9515),_=function(e){var n=e.location.state,t={name:"",company:"",mechanics:[],minPlayers:0,maxPlayers:10,minPlaytime:5,maxPlaytime:15,minAge:3,description:"",id:0,backupImage:"",year:""},l=i.useState(t),d=l[0],h=l[1],g=i.useState((null==n?void 0:n.mechanics)||null),y=g[0],E=g[1],v=i.useState(!1),b=v[0],F=v[1],k=i.useState([]),w=k[0],C=k[1],_=i.useState([]),z=_[0],N=_[1],H=i.useState(!1),D=H[0],W=H[1],j=i.useState(!0),B=j[0],G=j[1];function O(){return(O=(0,r.Z)(c().mark((function e(){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return F(!0),e.next=3,x();case 3:A(n=e.sent),E(n),F(!1);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e){"undefined"!=typeof window&&(localStorage.state=JSON.stringify(Object.assign({},n||{},{mechanics:e})))}function I(){return(I=(0,r.Z)(c().mark((function e(){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d.name){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,P(d.name);case 4:n=e.sent,C(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(e,n){var t,a=n.name,r=n.value;h(Object.assign({},d,((t={})[a]=r,t))),w.length&&C([])}function T(e,n,a){d.id===e?h(Object.assign({},t,{name:d.name,company:d.company})):h(Object.assign({},d,n,{mechanics:a.map((function(e){return e.name}))})),N([])}function q(){return(q=(0,r.Z)(c().mark((function e(){var a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d.id&&!D){e.next=2;break}return e.abrupt("return");case 2:return W(!0),e.prev=3,delete(a=Object.assign({},d)).id,e.next=8,(0,S.s2)({gameData:a,user:n.user});case 8:e.sent&&(h(t),C([])),e.next=14;break;case 12:e.prev=12,e.t0=e.catch(3);case 14:W(!1);case 15:case"end":return e.stop()}}),e,null,[[3,12]])})))).apply(this,arguments)}i.useState((function(){y||b||function(){O.apply(this,arguments)}()}));var J=y?[].concat((0,a.Z)(z),(0,a.Z)(y)).map((function(e){return{text:e.name,value:e.name}})):[];return i.createElement(i.Fragment,null,i.createElement(Z,{fluid:!0,onDone:function(){return q.apply(this,arguments)}},i.createElement(Z.Header,null,"Add New Game"),i.createElement(Z.Page,null,i.createElement(Z.Header,null,"Base Info"),i.createElement(m.Z.Field,null,i.createElement("label",{htmlFor:"name"},"Name"),i.createElement(u.Z,{id:"name",name:"name",value:d.name,onChange:M})),i.createElement(m.Z.Field,null,i.createElement("label",{htmlFor:"company"},"Company"),i.createElement(u.Z,{id:"company",name:"company",value:d.company,onChange:M}))),i.createElement(Z.Page,null,i.createElement(Z.Header,null,"Search More Details"),i.createElement(o.Z,{type:"button",icon:"search",content:"Search Game",onClick:function(){return I.apply(this,arguments)}}),w.map((function(e,n){return i.createElement(f,Object.assign({key:"game-preview-"+n},e,{mechanicsRef:y,toggleSelectGame:T,selectedGame:d}))})),w.length>3&&d.id?i.createElement(o.Z,{content:"To "+(B?"Bottom":"Top"),icon:"arrow "+(B?"down":"up"),circular:!0,color:"blue",style:{position:"fixed",bottom:"20%",left:"75%"},onClick:function(){G(!B);var e=document.querySelector(".content"),n=B?e.scrollHeight:0;e.scrollTo({top:n,behavior:"smooth"})}}):null),i.createElement(Z.Page,null,i.createElement(Z.Header,null,"Finalize Details"),i.createElement(m.Z.Field,null,i.createElement("label",{htmlFor:"name"},"Name"),i.createElement(u.Z,{id:"name",name:"name",value:d.name,onChange:M})),i.createElement(m.Z.Field,null,i.createElement("label",{htmlFor:"company"},"Company"),i.createElement(u.Z,{id:"company",name:"company",value:d.company,onChange:M})),i.createElement(m.Z.Field,null,i.createElement("label",{htmlFor:"description"},"Description"),i.createElement(s.Z,{id:"description",name:"description",value:d.description||"",onChange:M})),i.createElement(m.Z.Field,null,i.createElement("label",{htmlFor:"mechanics"},"Game Mechanics"),i.createElement(p.Z,{id:"mechanics",name:"mechanics",value:d.mechanics,onChange:M,options:J,multiple:!0,clearable:!0,search:!0,selectOnBlur:!1,allowAdditions:!0,onAddItem:function(e,n){var t=n.value;N([].concat((0,a.Z)(z),[{name:t}]))}})))))}},2434:function(e,n,t){t.r(n)}}]);
//# sourceMappingURL=component---src-pages-add-index-js-4c4c17ca1b9021d130d5.js.map