{"version":3,"file":"component---src-pages-index-js-74ab790f58cd7f8b03c1.js","mappings":"iPAYMA,EAAW,SAAC,GAAc,IAAZC,EAAW,EAAXA,KACVC,EAAO,CACTC,KAAM,GACNC,MAAO,GAGXH,EAAKI,UAAUC,SAAQ,SAAAC,GACfL,EAAKE,MAAQG,EAAEC,OAAS,KACxBN,EAAKC,KAAKM,KAAKF,GACfL,EAAKE,OAASG,EAAEC,WAIxB,IAAME,EAAaT,EAAKU,YAClBV,EAAKU,YACAC,MAAM,IACNC,QAAO,SAACC,EAAGC,GAAJ,OAAUA,EAAI,OACrBC,KAAK,IACV,GAEAC,EACFP,EAAWF,OAASP,EAAKU,YAAYH,OAC5BE,EADT,MAEMA,EAAWF,OACXE,EACA,iBAEV,OACI,gBAAC,WAAD,KACI,sBAAIQ,UAAU,YACV,gBAAC,EAAAC,KAAD,CAAMC,GAAE,UAAYnB,EAAKoB,IACrB,gBAACC,EAAA,EAAD,CAAQJ,UAAU,kBAAkBK,GAAG,MAClCtB,EAAKuB,MAEV,qBAAGN,UAAU,iBAAiBD,GAC9B,uBACIC,UAAU,iBACVO,KAAK,MACL,aAAYxB,EAAKuB,KACjBE,MAAO,CAAEC,gBAAgB,OAAQ1B,EAAK2B,YAAd,QAGhC,sBAAIV,UAAU,sBAEThB,EAAKC,KAAK0B,KAAI,SAACC,EAAGf,GACf,OACI,sBACIG,UAAU,eACVa,IAAG,iBAAmBhB,GAErBe,UAUjC9B,EAASgC,MApEoB,SAAC,GAA2B,IAAzBC,EAAwB,EAAxBA,SAAUC,EAAc,EAAdA,QACtC,OACI,gBAAC,WAAD,KACI,0BAAKD,GAAYC,KAmE7B,Q,UCLMC,EAAqB,CACvBC,Y,QAAAA,IASJ,OAAeC,EAAAA,EAAAA,KANf,YACI,MAAO,CACHC,SAF4B,EAATC,MAEHD,YAIgBH,EAAxC,EAtEa,SAAC,GAA+B,IAA7BG,EAA4B,EAA5BA,SAAUF,EAAkB,EAAlBA,YACtB,EAA8BI,EAAAA,UAAe,GAAtCC,EAAP,KAAgBC,EAAhB,KADwC,wCAOxC,wFACQD,IAAWH,EADnB,wDAEII,GAAW,GAFf,mBAIkCC,EAAAA,EAAAA,KAJlC,OAIcC,EAJd,OAKQR,EAAYQ,GALpB,0DAOIF,GAAW,GAPf,2DAPwC,sBAGxCF,EAAAA,WAAgB,YAHwB,mCAIpCK,MAkBJ,IAAMC,EAAcR,EACdA,EAASS,MAAK,SAACjC,EAAGkC,GACd,OAAOlC,EAAEU,KAAOwB,EAAExB,KAAO,GAAK,KAElC,GAEN,OACI,gBAAC,WAAD,KACI,qCACA,gBAACyB,EAAA,EAAD,CACIvB,MAAO,CAAEwB,SAAU,QAASC,IAAK,MAAOC,MAAO,QAC/CC,MAAM,SACNC,KAAK,OACLC,QAlBZ,WACQd,GACJL,EAAY,OAiBJoB,KAAK,QACL,aAAW,eACXtB,QAAQ,iBAEZ,gBAAC,QAAD,KACKI,GAAYA,EAAS9B,OAClBsC,EAAYjB,KAAI,SAAC4B,EAAG1C,GAChB,OACI,gBAAC,EAAD,CACIgB,IAAG,aAAehB,EAAf,IAAoB0C,EAAEpC,GACzBpB,KAAMwD,OAIlBnB,EACA,uDAEA","sources":["webpack://sty-my-games/./src/components/GameCard/index.js","webpack://sty-my-games/./src/pages/index.js"],"sourcesContent":["import React from 'react';\r\nimport { Link } from 'gatsby';\r\nimport { Header } from 'semantic-ui-react';\r\n\r\nexport const GameCardGroup = ({ children, content }) => {\r\n    return (\r\n        <React.Fragment>\r\n            <ul>{children || content}</ul>\r\n        </React.Fragment>\r\n    );\r\n};\r\n\r\nconst GameCard = ({ game }) => {\r\n    const tags = {\r\n        list: [],\r\n        count: 0,\r\n    };\r\n\r\n    game.mechanics.forEach(m => {\r\n        if (tags.count + m.length < 48) {\r\n            tags.list.push(m);\r\n            tags.count += m.length;\r\n        }\r\n    });\r\n\r\n    const descString = game.description\r\n        ? game.description\r\n              .split('')\r\n              .filter((a, i) => i < 150)\r\n              .join('')\r\n        : '';\r\n\r\n    const finalString =\r\n        descString.length < game.description.length\r\n            ? `${descString}...`\r\n            : descString.length\r\n            ? descString\r\n            : 'No description';\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <li className='gamecard'>\r\n                <Link to={`/game#/${game.id}`}>\r\n                    <Header className='gamecard-header' as='h3'>\r\n                        {game.name}\r\n                    </Header>\r\n                    <p className='gamecard-text'>{finalString}</p>\r\n                    <div\r\n                        className='gamecard-image'\r\n                        role='img'\r\n                        aria-label={game.name}\r\n                        style={{ backgroundImage: `url(${game.backupImage})` }}\r\n                    />\r\n                </Link>\r\n                <ul className='gamecard-otherinfo'>\r\n                    {/* 64 is max char length */}\r\n                    {tags.list.map((t, i) => {\r\n                        return (\r\n                            <li\r\n                                className='gamecard-tag'\r\n                                key={`game-card-tag-${i}`}\r\n                            >\r\n                                {t}\r\n                            </li>\r\n                        );\r\n                    })}\r\n                </ul>\r\n            </li>\r\n        </React.Fragment>\r\n    );\r\n};\r\n\r\nGameCard.Group = GameCardGroup;\r\n\r\nexport default GameCard;\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Button } from 'semantic-ui-react';\r\n\r\nimport GameCard from '../components/GameCard';\r\nimport { getAllGames } from '../functions/db';\r\n\r\nimport { setAllGames } from '../reducers/gamesReducer';\r\n\r\nconst Home = ({ allGames, setAllGames }) => {\r\n    const [loading, setLoading] = React.useState(false);\r\n\r\n    React.useEffect(() => {\r\n        attemptGetAllGames();\r\n    });\r\n\r\n    async function attemptGetAllGames() {\r\n        if (loading || allGames) return;\r\n        setLoading(true);\r\n        try {\r\n            const newAllGames = await getAllGames();\r\n            setAllGames(newAllGames);\r\n        } catch {}\r\n        setLoading(false);\r\n    }\r\n\r\n    function reloadGames() {\r\n        if (loading) return;\r\n        setAllGames(null);\r\n    }\r\n\r\n    const sortedGames = allGames\r\n        ? allGames.sort((a, b) => {\r\n              return a.name > b.name ? 1 : -1;\r\n          })\r\n        : [];\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <h2>Explore</h2>\r\n            <Button\r\n                style={{ position: 'fixed', top: '10%', right: '20px' }}\r\n                color='purple'\r\n                icon='sync'\r\n                onClick={reloadGames}\r\n                size='small'\r\n                aria-label='Reload Games'\r\n                content='Reload Games'\r\n            />\r\n            <GameCard.Group>\r\n                {allGames && allGames.length ? (\r\n                    sortedGames.map((g, i) => {\r\n                        return (\r\n                            <GameCard\r\n                                key={`game-card-${i}-${g.id}`}\r\n                                game={g}\r\n                            ></GameCard>\r\n                        );\r\n                    })\r\n                ) : allGames ? (\r\n                    <p>Sorry, no games available.</p>\r\n                ) : (\r\n                    <p>Please wait while the games are loading</p>\r\n                )}\r\n            </GameCard.Group>\r\n        </React.Fragment>\r\n    );\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n    setAllGames,\r\n};\r\n\r\nfunction mapStateToProps({ games }) {\r\n    return {\r\n        allGames: games.allGames,\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Home);\r\n"],"names":["GameCard","game","tags","list","count","mechanics","forEach","m","length","push","descString","description","split","filter","a","i","join","finalString","className","Link","to","id","Header","as","name","role","style","backgroundImage","backupImage","map","t","key","Group","children","content","mapDispatchToProps","setAllGames","connect","allGames","games","React","loading","setLoading","getAllGames","newAllGames","attemptGetAllGames","sortedGames","sort","b","Button","position","top","right","color","icon","onClick","size","g"],"sourceRoot":""}